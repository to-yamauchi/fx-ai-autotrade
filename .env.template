# FX自動トレードシステム 環境変数設定テンプレート
# このファイルをコピーして .env ファイルを作成し、実際の値を設定してください
# 注意: .envファイルはGitにコミットしないでください

# ========================================
# トレードモード設定
# ========================================
# TRADE_MODE: backtest / demo / live
#   backtest: 過去データでシミュレーション（data/tick_data使用、MT5接続不要）
#   demo:     リアルタイムデータでDEMO口座取引（MT5から取得、DEMO口座使用）
#   live:     リアルタイムデータで本番口座取引（MT5から取得、本番口座使用）
TRADE_MODE=backtest

# ========================================
# バックテストモード設定（TRADE_MODE=backtestの場合のみ使用）
# ========================================
# バックテスト期間（YYYY-MM-DD形式）
BACKTEST_START_DATE=2024-09-01
BACKTEST_END_DATE=2024-09-30

# バックテスト対象シンボル
BACKTEST_SYMBOL=USDJPY

# バックテスト初期残高（円）
BACKTEST_INITIAL_BALANCE=1000000

# バックテストティックデータパス（オプション）
# 指定しない場合、またはコメントアウトした場合はMT5からデータを取得します
# 単一ZIPファイル: data/tick_data/USDJPY/ticks_USDJPY-oj5k_2024-01.zip
# ディレクトリ: data/tick_data/USDJPY/
# 単一CSVファイル: data/ticks/USDJPY_2024-01.csv
BACKTEST_CSV_PATH=data/tick_data/USDJPY/ticks_USDJPY-oj5k_2024-01.zip

# ========================================
# LLM API設定（マルチプロバイダー対応）
# ========================================
# 対応プロバイダー: Gemini / OpenAI / Anthropic
# モデル名のプレフィックスから自動判定:
#   - gemini-* → Google Gemini
#   - gpt-*, chatgpt-*, o1-* → OpenAI
#   - claude-* → Anthropic Claude

# API Keys（使用するプロバイダーのキーのみ設定すればOK）
GEMINI_API_KEY=your_gemini_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Phase別モデル設定
# 各Phaseで異なるプロバイダーのモデルを混在可能
# 例: デイリー分析はClaude、定期更新はGemini、監視はGPT-4o-mini など

# デイリー分析用（Phase 1: デイリーレビュー, Phase 2: 朝の詳細分析, Phase 5: Layer 3b緊急評価）
# 推奨: 高精度モデル（claude-sonnet-4-5, gpt-4o, gemini-2.5-pro）
MODEL_DAILY_ANALYSIS=gemini-2.5-flash

# 定期更新用（Phase 3: 12:00/16:00/21:30の定期更新）
# 推奨: バランス型モデル（claude-sonnet-4, gpt-4o-mini, gemini-2.5-flash）
MODEL_PERIODIC_UPDATE=gemini-2.5-flash

# ポジション監視用（Phase 4: Layer 3a監視 15分ごと）
# 推奨: 高速軽量モデル（claude-haiku-4, gpt-4o-mini, gemini-2.5-flash）
MODEL_POSITION_MONITOR=gemini-2.5-flash

# 参考: 各プロバイダーの最新モデル
# Gemini:    https://ai.google.dev/gemini-api/docs/models
# OpenAI:    https://platform.openai.com/docs/models
# Anthropic: https://docs.anthropic.com/en/docs/about-claude/models

# AI分析パラメータ
# 温度設定（0.0-1.0、低いほど決定論的）
AI_TEMPERATURE_DAILY_ANALYSIS=0.3
AI_TEMPERATURE_PERIODIC_UPDATE=0.3
AI_TEMPERATURE_POSITION_MONITOR=0.2

# 最大トークン数（オプション：未設定の場合はLLMのデフォルトを使用）
# 注意: 設定すると応答が途中で切れる可能性があります。
#       通常は未設定（コメントアウト）を推奨します。
# AI_MAX_TOKENS_DAILY_ANALYSIS=3000
# AI_MAX_TOKENS_PERIODIC_UPDATE=2000
# AI_MAX_TOKENS_POSITION_MONITOR=500

# ========================================
# リスク管理設定
# ========================================
# デフォルトポジションサイズ（ロット数）
POSITION_SIZE_DEFAULT=0.1

# 最大同時ポジション数
MAX_POSITIONS=3

# 口座リスク率（1トレードあたりの最大損失 %）
RISK_PER_TRADE=2.0

# ストップロス（pips）
DEFAULT_STOP_LOSS_PIPS=50

# テイクプロフィット（pips）
DEFAULT_TAKE_PROFIT_PIPS=100

# ========================================
# テクニカル指標パラメータ
# ========================================
# EMA（指数移動平均）
EMA_SHORT_PERIOD=20
EMA_LONG_PERIOD=50

# RSI（相対力指数）
RSI_PERIOD=14
RSI_OVERBOUGHT=70
RSI_OVERSOLD=30

# MACD
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# ATR（平均真実範囲）
ATR_PERIOD=14

# ボリンジャーバンド
BOLLINGER_PERIOD=20
BOLLINGER_STD_DEV=2.0

# サポート&レジスタンス
SUPPORT_RESISTANCE_WINDOW=20

# ========================================
# Layer 3監視設定
# ========================================
# Layer 3a監視間隔（分）
LAYER3A_MONITOR_INTERVAL=15

# 異常検知の閾値
# 価格変動閾値（%）
ANOMALY_PRICE_CHANGE_THRESHOLD=0.5

# スプレッド拡大閾値（通常の何倍）
ANOMALY_SPREAD_MULTIPLIER=3.0

# ボラティリティ閾値（ATRの何倍）
ANOMALY_VOLATILITY_MULTIPLIER=2.0

# 含み損閾値（%）
ANOMALY_DRAWDOWN_THRESHOLD=3.0

# ========================================
# MetaTrader5設定（DEMO口座）
# TRADE_MODE=demoの場合に使用
# ========================================
MT5_LOGIN=your_mt5_login_number
MT5_PASSWORD=your_mt5_password
MT5_SERVER=your_mt5_server_name

# ========================================
# MetaTrader5設定（本番口座）
# TRADE_MODE=liveの場合に使用
# 注意: 本番口座の情報は厳重に管理してください
# ========================================
MT5_LIVE_LOGIN=
MT5_LIVE_PASSWORD=
MT5_LIVE_SERVER=

# ========================================
# PostgreSQLデータベース設定
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=fx_autotrade
DB_USER=postgres
DB_PASSWORD=your_database_password

# ========================================
# ロギング設定
# ========================================
LOG_LEVEL=INFO
LOG_FILE=logs/fx_autotrade.log

# デバッグモード（詳細ログ出力）
DEBUG_MODE=false
