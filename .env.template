# FX自動トレードシステム 環境変数設定テンプレート
# このファイルをコピーして .env ファイルを作成し、実際の値を設定してください
# 注意: .envファイルはGitにコミットしないでください

# ========================================
# トレードモード設定
# ========================================
# TRADE_MODE: backtest / demo / live
#   backtest: 過去データでシミュレーション（data/tick_data使用、MT5接続不要）
#   demo:     リアルタイムデータでDEMO口座取引（MT5から取得、DEMO口座使用）
#   live:     リアルタイムデータで本番口座取引（MT5から取得、本番口座使用）
TRADE_MODE=backtest

# ========================================
# バックテストモード設定（TRADE_MODE=backtestの場合のみ使用）
# ========================================
# バックテスト期間（YYYY-MM-DD形式）
BACKTEST_START_DATE=2024-09-01
BACKTEST_END_DATE=2024-09-30

# バックテスト対象シンボル
BACKTEST_SYMBOL=USDJPY

# バックテスト初期残高（円）
BACKTEST_INITIAL_BALANCE=1000000

# バックテストティックデータパス（オプション）
# 指定しない場合、またはコメントアウトした場合はMT5からデータを取得します
# 単一ZIPファイル: data/tick_data/USDJPY/ticks_USDJPY-oj5k_2024-01.zip
# ディレクトリ: data/tick_data/USDJPY/
# 単一CSVファイル: data/ticks/USDJPY_2024-01.csv
BACKTEST_CSV_PATH=data/tick_data/USDJPY/ticks_USDJPY-oj5k_2024-01.zip

# ルール再生成インターバル（時間）
# 1: 毎時00分（00:00, 01:00, 02:00, ...）
# 4: 4時間ごと（00:00, 04:00, 08:00, 12:00, 16:00, 20:00）
# 本番/DEMO/バックテスト全てに適用されます
RULE_GENERATION_INTERVAL_HOURS=1

# ========================================
# LLM API設定（マルチプロバイダー対応）
# ========================================
# 対応プロバイダー: Gemini / OpenAI / Anthropic
# モデル名のプレフィックスから自動判定:
#   - gemini-* → Google Gemini
#   - gpt-*, chatgpt-*, o1-* → OpenAI
#   - claude-* → Anthropic Claude

# API Keys（使用するプロバイダーのキーのみ設定すればOK）
GEMINI_API_KEY=your_gemini_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Phase別モデル設定
# 各Phaseで異なるプロバイダーのモデルを混在可能
# マルチプロバイダー対応済み: Gemini / OpenAI / Anthropic Claude
# モデル名のプレフィックスから自動でプロバイダーを判定します

# デイリー分析用（Phase 1: デイリーレビュー, Phase 2: 朝の詳細分析）
# 推奨: 高性能モデル（詳細な分析が必要）
# 例: gemini-2.0-flash-exp, gemini-1.5-pro, claude-sonnet-4-5, gpt-4o
MODEL_DAILY_ANALYSIS=gemini-2.0-flash-exp

# 定期更新用（Phase 3: 12:00/16:00/21:30の定期更新）
# 推奨: バランス型モデル（速度と精度のバランス）
# 例: gemini-2.0-flash-exp, gemini-1.5-flash, claude-3-5-haiku, gpt-4o-mini
MODEL_PERIODIC_UPDATE=gemini-2.0-flash-exp

# ポジション監視用（Phase 4: Layer 3a監視 15分ごと）
# 推奨: 高速・軽量モデル（頻繁に呼ばれるため）
# 例: gemini-1.5-flash-8b, gemini-1.5-flash, claude-3-5-haiku, gpt-4o-mini
MODEL_POSITION_MONITOR=gemini-1.5-flash-8b

# 緊急評価用（Phase 5: Layer 3b緊急評価 異常検知時）
# 推奨: 高精度モデル（重要な判断が必要）
# 例: gemini-1.5-pro, gemini-2.0-flash-exp, claude-sonnet-4-5, gpt-4o
MODEL_EMERGENCY_EVALUATION=gemini-1.5-pro

# 参考: 各プロバイダーの最新モデル
# Gemini:    https://ai.google.dev/gemini-api/docs/models
# OpenAI:    https://platform.openai.com/docs/models
# Anthropic: https://docs.anthropic.com/en/docs/about-claude/models

# AI分析パラメータ
# 温度設定（0.0-1.0、低いほど決定論的）
AI_TEMPERATURE_DAILY_ANALYSIS=0.3
AI_TEMPERATURE_PERIODIC_UPDATE=0.3
AI_TEMPERATURE_POSITION_MONITOR=0.2
AI_TEMPERATURE_EMERGENCY_EVALUATION=0.3

# 最大トークン数（オプション：未設定の場合はLLMのデフォルトを使用）
# 注意: 設定すると応答が途中で切れる可能性があります。
#       通常は未設定（コメントアウト）を推奨します。
# AI_MAX_TOKENS_DAILY_ANALYSIS=3000
# AI_MAX_TOKENS_PERIODIC_UPDATE=2000
# AI_MAX_TOKENS_POSITION_MONITOR=500
# AI_MAX_TOKENS_EMERGENCY_EVALUATION=3000

# ========================================
# LLMモデル料金設定（コスト計算用）
# ========================================
# 各モデルの料金（USD per 1M tokens）
# 料金は各プロバイダーの公式サイトで確認してください
# 設定しない場合はコスト計算が行われません

# Anthropic Claude料金
# https://www.anthropic.com/pricing
PRICE_claude-sonnet-4-5_INPUT=3.00
PRICE_claude-sonnet-4-5_OUTPUT=15.00
PRICE_claude-3-5-haiku-20241022_INPUT=1.00
PRICE_claude-3-5-haiku-20241022_OUTPUT=5.00

# Google Gemini料金
# https://ai.google.dev/pricing
PRICE_gemini-2.5-pro_INPUT=1.25
PRICE_gemini-2.5-pro_OUTPUT=5.00
PRICE_gemini-2.5-flash_INPUT=0.075
PRICE_gemini-2.5-flash_OUTPUT=0.30
PRICE_gemini-2.0-flash-lite_INPUT=0.01
PRICE_gemini-2.0-flash-lite_OUTPUT=0.04

# OpenAI料金
# https://openai.com/api/pricing/
PRICE_gpt-5-nano_INPUT=0.05
PRICE_gpt-5-nano_OUTPUT=0.40
PRICE_gpt-4o_INPUT=2.50
PRICE_gpt-4o_OUTPUT=10.00
PRICE_gpt-4o-mini_INPUT=0.15
PRICE_gpt-4o-mini_OUTPUT=0.60

# ========================================
# リスク管理設定
# ========================================
# デフォルトポジションサイズ（ロット数）
POSITION_SIZE_DEFAULT=0.1

# 最大同時ポジション数
MAX_POSITIONS=3

# 口座リスク率（1トレードあたりの最大損失 %）
RISK_PER_TRADE=2.0

# ストップロス（pips）
DEFAULT_STOP_LOSS_PIPS=50

# テイクプロフィット（pips）
DEFAULT_TAKE_PROFIT_PIPS=100

# ========================================
# テクニカル指標パラメータ
# ========================================
# EMA（指数移動平均）
EMA_SHORT_PERIOD=20
EMA_LONG_PERIOD=50

# RSI（相対力指数）
RSI_PERIOD=14
RSI_OVERBOUGHT=70
RSI_OVERSOLD=30

# MACD
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# ATR（平均真実範囲）
ATR_PERIOD=14

# ボリンジャーバンド
BOLLINGER_PERIOD=20
BOLLINGER_STD_DEV=2.0

# サポート&レジスタンス
SUPPORT_RESISTANCE_WINDOW=20

# ========================================
# Layer 3監視設定
# ========================================
# Layer 3a監視間隔（分）
LAYER3A_MONITOR_INTERVAL=15

# 異常検知の閾値
# 価格変動閾値（%）
ANOMALY_PRICE_CHANGE_THRESHOLD=0.5

# スプレッド拡大閾値（通常の何倍）
ANOMALY_SPREAD_MULTIPLIER=3.0

# ボラティリティ閾値（ATRの何倍）
ANOMALY_VOLATILITY_MULTIPLIER=2.0

# 含み損閾値（%）
ANOMALY_DRAWDOWN_THRESHOLD=3.0

# ========================================
# MetaTrader5設定（DEMO口座）
# TRADE_MODE=demoの場合に使用
# ========================================
MT5_LOGIN=your_mt5_login_number
MT5_PASSWORD=your_mt5_password
MT5_SERVER=your_mt5_server_name

# ========================================
# MetaTrader5設定（本番口座）
# TRADE_MODE=liveの場合に使用
# 注意: 本番口座の情報は厳重に管理してください
# ========================================
MT5_LIVE_LOGIN=
MT5_LIVE_PASSWORD=
MT5_LIVE_SERVER=

# ========================================
# PostgreSQLデータベース設定
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=fx_autotrade
DB_USER=postgres
DB_PASSWORD=your_database_password

# ========================================
# ロギング設定
# ========================================
LOG_LEVEL=INFO
LOG_FILE=logs/fx_autotrade.log

# デバッグモード（詳細ログ出力）
DEBUG_MODE=false
